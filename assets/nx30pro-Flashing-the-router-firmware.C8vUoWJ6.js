import{_ as u}from"./ValaxyMain.vue_vue_type_style_index_0_lang.CFvWi_xj.js";import{e as g,a as E,u as y}from"./chunks/vue-router.CAt55Yzq.js";import{O as m,a3 as l,Y as e,S as s,V as i,u as b,N as f,p as v}from"./framework.Bx4IBBtZ.js";import"./app.D3ctC_Wl.js";import"./chunks/dayjs.DRNXKsfK.js";import"./chunks/@vueuse/motion.Byj5MUCG.js";import"./chunks/vue-i18n.DwLH6cq3.js";import"./chunks/pinia.CI9RAdk9.js";import"./chunks/nprogress.Y9-A6VbA.js";import"./YunComment.vue_vue_type_style_index_0_lang.CZYDag5Y.js";import"./index.C5okkQwF.js";import"./YunPageHeader.vue_vue_type_script_setup_true_lang.DSDYc4Us.js";import"./post.Ln3noTiG.js";const F=g("/posts/nx30pro-Flashing-the-router-firmware",async n=>JSON.parse('{"title":"H3C NX30pro 新版固件（V100R010、V100R009）免拆机刷机","description":"","frontmatter":{"layout":"post","title":"H3C NX30pro 新版固件（V100R010、V100R009）免拆机刷机","tags":["刷机","路由器","Linxu"],"categories":["技术"],"date":"2026-01-21 17:47:02","cover":"https://www.yiurblog.top/cywl.jpg"},"headers":[],"relativePath":"pages/posts/nx30pro-Flashing-the-router-firmware.md","lastUpdated":1769776689000}'),{lazy:(n,t)=>n.name===t.name}),V={__name:"nx30pro-Flashing-the-router-firmware",setup(n,{expose:t}){var r;const{data:h}=F(),k=y(),c=E(),p=Object.assign(c.meta.frontmatter||{},((r=h.value)==null?void 0:r.frontmatter)||{});return k.currentRoute.value.data=h.value,v("valaxy:frontmatter",p),globalThis.$frontmatter=p,t({frontmatter:{layout:"post",title:"H3C NX30pro 新版固件（V100R010、V100R009）免拆机刷机",tags:["刷机","路由器","Linxu"],categories:["技术"],date:"2026-01-21 17:47:02",cover:"https://www.yiurblog.top/cywl.jpg"}}),(a,o)=>{const d=u;return f(),m(d,{frontmatter:b(p)},{"main-content-md":l(()=>[...o[0]||(o[0]=[s("blockquote",null,[s("p",null,[i("事情是这样的，有傻子想折腾nixos和pixel还有switch那一大堆，为了方便才这样子折腾刷路由器，但是回家那天看见路由器原厂固件可以更新就手贱了，导致折腾了巨大一圈，这里的特别感谢茶栗老师的 "),s("a",{href:"https://chariri.moe/archives/2383/h3c-nx30-pro-openwrt-new-stock-firmware-no-ttl/",target:"_blank",rel:"noreferrer"},"教程")])],-1),s("blockquote",null,[s("p",null,"[!WARNING]"),s("p",null,"刷机有概率变砖，请谨慎刷机")],-1),s("p",null,"此方案是通过备份原厂固件，对固件逆向后添加代码打开telnet口再打开SSH刷入文件",-1),s("h2",{id:"基础准备",tabindex:"-1"},[i("基础准备 "),s("a",{class:"header-anchor",href:"#基础准备","aria-label":'Permalink to "基础准备"'},"​")],-1),s("p",null,[i("需要的基础工具有"),s("a",{href:"https://winscp.net/eng/index.php",target:"_blank",rel:"noreferrer"},"WinSCP"),i("和"),s("a",{href:"https://winscp.net/eng/index.php",target:"_blank",rel:"noreferrer"},"PuTTY"),s("em",null,[i("（似乎不少人喜欢使用"),s("a",{href:"https://termius.com/",target:"_blank",rel:"noreferrer"},"Termius"),i(",不过我觉得需要注册比较没法，所以使用这种更轻量化开源软件）")])],-1),s("p",null,[i("然后我们需要一个linux环境，我自己使用的是wsl，如果要安装wsl可以看我这篇"),s("a",{href:"https://yiurblog.top/posts/%E4%BD%BF%E7%94%A8wsl2%E8%A3%85%E8%BD%BDdebian",target:"_blank",rel:"noreferrer"},"教程"),i("。这是因为原厂固件本质上是linux系统，不同文件有不同的权限，win目录下解压会导致这些权限全部变成普通用户，没法打开telnet口"),s("s",null,"我已经踩过坑了")],-1),s("p",null,[i("其次需要一个python环境，用来对文件进行解密，当然异或的话能用什么语言写出来都可以，这里提供了安装环境的"),s("a",{href:"https://www.runoob.com/python3/python3-install.html",target:"_blank",rel:"noreferrer"},"教程"),s("s",null,"（不过我自己用的minicoda）")],-1),s("p",null,[i("最后是准备刷写的固件，可以根据需求选择，不过记得匹配一下uboot版本，要不然会变砖，这里扔一个固件，"),s("a",{href:"https://www.right.com.cn/forum/thread-8291820-1-1.html",target:"_blank",rel:"noreferrer"},"来源"),i(" 链接："),s("a",{href:"https://pan.quark.cn/s/0e169171cd7b?pwd=NF7h",target:"_blank",rel:"noreferrer"},"https://pan.quark.cn/s/0e169171cd7b?pwd=NF7h")],-1),s("h2",{id:"逆向原厂固件打开telnet",tabindex:"-1"},[i("逆向原厂固件打开telnet "),s("a",{class:"header-anchor",href:"#逆向原厂固件打开telnet","aria-label":'Permalink to "逆向原厂固件打开telnet"'},"​")],-1),s("p",null,[i("首先进入192.168.124.1的原厂后台，再选择 更多- 设备管理- 设备管理 - 配置备份，获得"),s("code",null,"NX30Pro.cfg"),i(" 文件")],-1),s("p",null,"这个文件是异或加密的这里抄茶栗老师的异或脚本",-1),s("div",{class:"language-python vp-adaptive-theme"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"python"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"#!/usr/bin/python3")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"import"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," sys")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"import"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," os")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"def"),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," xor_file"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(input_path):")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"    # 1. Validation: Ensure the file exists")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    if"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," not"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," os.path.isfile(input_path):")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"        print"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"f"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},`"Error: File '`),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"{"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"input_path"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"}"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},`' not found."`),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"        return")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"    # 2. Define the output filename")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    base_name "),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," os.path.basename(input_path)")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    output_path "),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," f"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"decoded-'),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"{"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"base_name"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"}"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"')]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    try"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        # 3. Read the input file in binary mode ('rb')")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"        with"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," open"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(input_path, "),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"'rb'"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") "),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"as"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," f:")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            data "),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," f.read()")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        # 4. Perform XOR 0x55 on each byte")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        # We use a bytearray for efficient processing")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        processed_data "),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," bytearray"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(b "),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"^"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," 0x"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"55"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," for"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," b "),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"in"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," data)")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"        # 5. Write the result to the new file in binary mode ('wb')")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"        with"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," open"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(output_path, "),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"'wb'"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") "),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"as"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," f:")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"            f.write(processed_data)")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"        print"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"f"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Success! Processed file saved as: '),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"{"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"output_path"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"}"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"'),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    except"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," Exception"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," as"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," e:")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"        print"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"f"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"An error occurred: '),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"{"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"e"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"}"),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"'),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," ")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"if"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," __name__"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," =="),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},' "__main__"'),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"    # Check if a filename was provided as a command-line argument")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    if"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," len"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(sys.argv) "),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"<"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 2"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"        print"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},'"Usage: python script_name.py <filename>"'),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},")")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    else"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"        xor_file(sys.argv["),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"])")])])]),s("button",{class:"collapse"})],-1),s("p",null,[i("新手可以直接拿记事本粘贴上去，然后把文件名改成"),s("code",null,".py"),i("后缀就好了，我这里文件命名为"),s("code",null,"xor.py")],-1),s("p",null,[i("然后把"),s("code",null,"NX30Pro.cfg"),i("和"),s("code",null,"xor.py"),i("放在同一个文件夹，在这个文件夹打开cmd或者终端（在文件资源管理器的地址栏直接输入cmd或者powershell）")],-1),s("p",null,"输入",-1),s("div",{class:"language- vp-adaptive-theme"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"}),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",null,"python xor.py NX30Pro.cfg")])])]),s("button",{class:"collapse"})],-1),s("p",null,"也可能是",-1),s("div",{class:"language- vp-adaptive-theme"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"}),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",null,"python3 xor.py NX30Pro.cfg")])])]),s("button",{class:"collapse"})],-1),s("p",null,[i("这时候得到"),s("code",null,"decoded-NX30Pro.cfg")],-1),s("p",null,[i("把"),s("code",null,"decoded-NX30Pro.cfg"),i("拷贝到linux里面vm,wsl(请不要使用wsl直接操作win目录，一定要拷贝到linux目录下)都可以")],-1),s("p",null,[i("打开拷贝后"),s("code",null,"decoded-NX30Pro.cfg"),i("所在的目录")],-1),s("p",null,"先",-1),s("div",{class:"language- vp-adaptive-theme"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"}),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",null,"su")])])]),s("button",{class:"collapse"})],-1),s("p",null,"输入密码后进入root（输密码看不见是正常情况，只是隐藏了而已）",-1),s("p",null,"再改一个后缀方便系统识别压缩包",-1),s("div",{class:"language- vp-adaptive-theme"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"}),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",null,"mv decoded-NX30Pro.cfg decoded-NX30Pro.tar.gz")])])]),s("button",{class:"collapse"})],-1),s("p",null,"创建两个文件夹用来放解压后文件",-1),s("div",{class:"language- vp-adaptive-theme"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"}),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",null,"mkdir NX30Pro-config")]),i(`
`),s("span",{class:"line"},[s("span",null,"mkdir NX30Pro")])])]),s("button",{class:"collapse"})],-1),s("p",null,"保留权限解压文件",-1),s("div",{class:"language- vp-adaptive-theme"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"}),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",null,"tar -xpzf decoded-NX30Pro.tar.gz -C NX30Pro-config")])])]),s("button",{class:"collapse"})],-1),s("p",null,[i("现在output里面有"),s("code",null,"NX30Pro.info"),i(),s("code",null,"NX30Pro.tar.gz"),i("两个文件了")],-1),s("p",null,"解压另一个压缩文件到NX30Pro文件夹",-1),s("div",{class:"language- vp-adaptive-theme"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"}),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",null,"cd NX30Pro-config")]),i(`
`),s("span",{class:"line"},[s("span",null,"tar -xpzf decoded-NX30Pro.tar.gz -C ../NX30Pro")])])]),s("button",{class:"collapse"})],-1),s("p",null,"随后进入config目录",-1),s("div",{class:"language- vp-adaptive-theme"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"}),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",null,"cd ../NX30Pro/mnt/config")])])]),s("button",{class:"collapse"})],-1),s("p",null,"建立NX30Pro/mnt/config/script目录并添加文件",-1),s("div",{class:"language- vp-adaptive-theme"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"}),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",null,"mkdir script")]),i(`
`),s("span",{class:"line"},[s("span",null,"cd script")]),i(`
`),s("span",{class:"line"},[s("span",null,"nano enable-telnet.sh")])])]),s("button",{class:"collapse"})],-1),s("p",null,"随后进入编辑器添加以下代码",-1),s("div",{class:"language- vp-adaptive-theme"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"}),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",null,"#!/bin/sh")]),i(`
`),s("span",{class:"line"},[s("span",null,"telnetd -l /bin/sh -p 7788")])])]),s("button",{class:"collapse"})],-1),s("p",null,[i("然后按住"),s("code",null,"Ctrl+X"),i("再按"),s("code",null,"y"),i("最后按"),s("code",null,"Enter"),i("保存并退出")],-1),s("p",null,"再编辑firewall",-1),s("div",{class:"language- vp-adaptive-theme"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"}),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",null,"cd ..")]),i(`
`),s("span",{class:"line"},[s("span",null,"nano firewall")])])]),s("button",{class:"collapse"})],-1),s("p",null,"在文件开头添加",-1),s("div",{class:"language- vp-adaptive-theme"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"}),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",null,"config include 'custom'")]),i(`
`),s("span",{class:"line"},[s("span",null,"        option type 'script'")]),i(`
`),s("span",{class:"line"},[s("span",null,"        option path '/etc/config/script/enable-telnet.sh'")]),i(`
`),s("span",{class:"line"},[s("span",null,"        option family 'any'")]),i(`
`),s("span",{class:"line"},[s("span",null,"        option enable '1'")]),i(`
`),s("span",{class:"line"},[s("span",null,"        option reload '1'")])])]),s("button",{class:"collapse"})],-1),s("p",null,[i("依旧按住"),s("code",null,"Ctrl+X"),i("再按"),s("code",null,"y"),i("最后按"),s("code",null,"Enter"),i("保存并退出")],-1),s("p",null,"接下来要更改检验文件",-1),s("div",{class:"language- vp-adaptive-theme"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"}),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",null,"rm -rf cfgmd5/firewall*")]),i(`
`),s("span",{class:"line"},[s("span",null,"fwmd5=$(md5sum firewall | awk '{print $1}')")]),i(`
`),s("span",{class:"line"},[s("span",null,'touch "cfgmd5/firewall-$fwmd5"')])])]),s("button",{class:"collapse"})],-1),s("p",null,[i("这样"),s("code",null,"firewall"),i("的检验文件就改好了")],-1),s("p",null,"接下来先保留全权限压缩文件回去",-1),s("div",{class:"language- vp-adaptive-theme"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"}),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",null,"cd ../..")]),i(`
`),s("span",{class:"line"},[s("span",null,"tar -czpf ../NX30Pro-config/NX30Pro.tar.gz *")])])]),s("button",{class:"collapse"})],-1),s("p",null,"修改info的md5检验文件",-1),s("div",{class:"language- vp-adaptive-theme"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"}),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",null,"cd ../NX30Pro-config")]),i(`
`),s("span",{class:"line"},[s("span",null,"cfmd5=$(md5sum NX30Pro.tar.gz | awk '{print $1}')")]),i(`
`),s("span",{class:"line"},[s("span",null,'echo -e "NX30ProV100R010\\n$cfmd5" > NX30Pro.info')])])]),s("button",{class:"collapse"})],-1),s("p",null,"再进行保留权限压缩",-1),s("div",{class:"language- vp-adaptive-theme"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"}),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",null,"tar -czpf ../NX30Pro-finished.cfg *")])])]),s("button",{class:"collapse"})],-1),s("p",null,[i("接下来来可以把"),s("code",null,"NX30Pro-finished.cfg"),i("复制回原来的文件夹")],-1),s("p",null,"在当前目录的终端使用",-1),s("div",{class:"language- vp-adaptive-theme"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"}),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",null,"python xor.py NX30Pro-finished.cfg")])])]),s("button",{class:"collapse"})],-1),s("p",null,[i("异或给文件加密回去，最后上传"),s("code",null,"decoded-NX30Pro-finished.cfg"),i("文件到路由器，就会发现telnet口打开了")],-1),s("p",null,[s("s",null,"（一个手贱让我耗费八百年）")],-1),s("h2",{id:"开启ssh",tabindex:"-1"},[i("开启SSH "),s("a",{class:"header-anchor",href:"#开启ssh","aria-label":'Permalink to "开启SSH"'},"​")],-1),s("p",null,[i("这一步请确保路由器能正常联网。打开PuTTY，在Host Name输入"),s("code",null,"192.168.124.1"),i("，Port为"),s("code",null,"7788"),i("，要记得Connection type选择"),s("code",null,"Other:Telnet")],-1),s("p",null,[i("连接上后执行以下命令(这个终端的复制是"),s("code",null,"ctrl+shift+v"),i(")打开ssh")],-1),s("div",{class:"language- vp-adaptive-theme"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"}),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",null,"curl -o /tmp/dropbear.ipk https://downloads.openwrt.org/releases/packages-19.07/aarch64_cortex-a53/base/dropbear_2019.78-2_aarch64_cortex-a53.ipk")]),i(`
`),s("span",{class:"line"},[s("span",null,"opkg install /tmp/dropbear.ipk")]),i(`
`),s("span",{class:"line"},[s("span",null,"/etc/init.d/dropbear enable")]),i(`
`),s("span",{class:"line"},[s("span",null,"/etc/init.d/dropbear start")])])]),s("button",{class:"collapse"})],-1),s("h2",{id:"备份原厂固件",tabindex:"-1"},[i("备份原厂固件 "),s("a",{class:"header-anchor",href:"#备份原厂固件","aria-label":'Permalink to "备份原厂固件"'},"​")],-1),s("p",null,"然后先备份一个路由器原厂文件",-1),s("div",{class:"language- vp-adaptive-theme"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"}),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",null,"dd if=/dev/mtd5 of=/tmp/backup.img")])])]),s("button",{class:"collapse"})],-1),s("p",null,[i("然后打开 WinSCP，文件协议选择 "),s("code",null,"SCP"),i("，主机名 "),s("code",null,"192.168.124.1"),i("，端口号 "),s("code",null,"22"),i("，用户名 "),s("code",null,"root"),i("，密码"),s("code",null,"admin")],-1),s("p",null,"登录后，将右侧 NX30Pro tmp 路径下的 backup.img 文件拖到左边电脑上保存，这是官方固件的备份",-1),s("h2",{id:"写入新固件",tabindex:"-1"},[i("写入新固件 "),s("a",{class:"header-anchor",href:"#写入新固件","aria-label":'Permalink to "写入新固件"'},"​")],-1),s("p",null,"将下载好的 uboot.bin 文件从左边电脑拖进右侧路由器 tmp 路径下",-1),s("p",null,"先进行MD5校验",-1),s("p",null,"在PuTTY打开的终端输入",-1),s("div",{class:"language- vp-adaptive-theme"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"}),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",null,"cd /tmp")]),i(`
`),s("span",{class:"line"},[s("span",null,"md5sum uboot.bin")])])]),s("button",{class:"collapse"})],-1),s("p",null,[i("如果使用上述固件必须为"),s("code",null,"5c12bd472c255a1e28819e95a3151bf1"),i("，要不然文件损坏会变砖")],-1),s("p",null,"然后执行命令写入 uboot",-1),s("div",{class:"language- vp-adaptive-theme"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"}),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",null,"mtd write /tmp/uboot.bin FIP")])])]),s("button",{class:"collapse"})],-1),s("p",null,"接下来先断开路由器网线和电源线，先按住背后 Reset 恢复按钮不放，再插电，等待 10s 左右松开背后 Reset，电脑用网线连接路由器 LAN1，同时在电脑设置-网络和Internet-以太网-IP分配（编辑）设置为手动，打开ipv4,IP地址填 192.168.1.2，子网掩码 255.255.255.0，网关 192.168.1.1，DNS 192.168.1.1",-1),s("p",null,"然后在浏览器打开 192.168.1.1 就能打开 uboot 后台",-1),s("p",null,[i("选择下载好的 NX30pro 的固件，upload 上传后，update 更新，写入即可，完成后会显示成功不过依旧会转圈（"),s("s",null,"有傻子没看字，一直转圈以为变砖了）")],-1),s("h2",{id:"openwrt",tabindex:"-1"},[i("openwrt "),s("a",{class:"header-anchor",href:"#openwrt","aria-label":'Permalink to "openwrt"'},"​")],-1),s("p",null,"路由器自动重启后就进入了openwrt，台地址 192.168.6.1，用户名 root，密码 password",-1),s("p",null,"记得把电脑以太网设置改回去",-1),s("p",null,[i("然后在后台-无线里面，点击类似于 "),s("strong",null,"接口"),i("： ra0 | "),s("strong",null,"类型:"),i(" AP | "),s("strong",null,"SSID:"),i(" MTK_CHEETAH_AP_2.4G | "),s("strong",null,"信道:"),i(" 7 "),s("strong",null,"BSSID:"),i(" 00:78:32:26:60:e0 | "),s("strong",null,"无线模式:"),i(" HE_2G这一栏的配置修改2.4G与5Gwifi的密码，认证模式选择"),s("code",null,"WPAPSKWPA2PSK"),i("（够一般家庭使用了）再输入密码")],-1),s("p",null,"接下来自己美美折腾去（x",-1)])]),"main-header":l(()=>[e(a.$slots,"main-header")]),"main-header-after":l(()=>[e(a.$slots,"main-header-after")]),"main-nav":l(()=>[e(a.$slots,"main-nav")]),"main-content-before":l(()=>[e(a.$slots,"main-content-before")]),"main-content":l(()=>[e(a.$slots,"main-content")]),"main-content-after":l(()=>[e(a.$slots,"main-content-after")]),"main-nav-before":l(()=>[e(a.$slots,"main-nav-before")]),"main-nav-after":l(()=>[e(a.$slots,"main-nav-after")]),comment:l(()=>[e(a.$slots,"comment")]),footer:l(()=>[e(a.$slots,"footer")]),aside:l(()=>[e(a.$slots,"aside")]),"aside-custom":l(()=>[e(a.$slots,"aside-custom")]),default:l(()=>[e(a.$slots,"default")]),_:3},8,["frontmatter"])}}};export{V as default,F as usePageData};
